<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MapMap: ShapeGraphicsItem.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MapMap
   &#160;<span id="projectnumber">0.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ShapeGraphicsItem.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ShapeGraphicsItem_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Shape.cpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * (c) 2013 Sofian Audry -- info(@)sofianaudry(.)com</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * (c) 2013 Alexandre Quessy -- alexandre(@)quessy(.)net</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ShapeGraphicsItem_8h.html">ShapeGraphicsItem.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MainWindow_8h.html">MainWindow.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classShapeGraphicsItem.html#ad56e134f78536a9a7270da1482f65b5a">   25</a></span>&#160;<a class="code" href="classShapeGraphicsItem.html#ad56e134f78536a9a7270da1482f65b5a">ShapeGraphicsItem::ShapeGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  : _mapping(mapping), _output(output)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a> = output ? <a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getShape() : <a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getInputShape();</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">   31</a></span>&#160;<a class="code" href="classMapperGLCanvas.html">MapperGLCanvas</a>* <a class="code" href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">ShapeGraphicsItem::getCanvas</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classMainWindow.html">MainWindow</a>* win = <a class="code" href="classMainWindow.html#a4f7e1bd77c8b2e64bd374874ff347ede">MainWindow::instance</a>();</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>() ? win-&gt;<a class="code" href="classMainWindow.html#ab3765a17ae8cdb5891bd873024630c3b">getDestinationCanvas</a>() : win-&gt;<a class="code" href="classMainWindow.html#a4377db0befe543fe0d7914010e21fef1">getSourceCanvas</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="classShapeGraphicsItem.html#ace336beca655965fff6324b788f2c571">   37</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classShapeGraphicsItem.html#ace336beca655965fff6324b788f2c571">ShapeGraphicsItem::isMappingCurrent</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classMainWindow.html#a4f7e1bd77c8b2e64bd374874ff347ede">MainWindow::instance</a>()-&gt;<a class="code" href="classMainWindow.html#a8626737961e658b6fdb70599d7840474">getCurrentMappingId</a>() == <a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getId();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classShapeGraphicsItem.html#ad848db2b75def8fdfdff526c4477df22">   41</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classShapeGraphicsItem.html#ad848db2b75def8fdfdff526c4477df22">ShapeGraphicsItem::paint</a>(QPainter *painter,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                              <span class="keyword">const</span> QStyleOptionGraphicsItem *option, QWidget *widget)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  Q_UNUSED(widget);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// Sync depth of figure with that of mapping (for layered output).</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>())</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    setZValue(<a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getDepth());</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// Paint if visible.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#ad23f14605614232fc032b5ecd54701e5">isMappingVisible</a>())</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Paint whatever needs to be painted.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classShapeGraphicsItem.html#ac7bc640d0be00fe77481e8379e7c6184">_prePaint</a>(painter, option);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classShapeGraphicsItem.html#a2a6f8de450ff9536f11bc06b4493c439">_doPaint</a>(painter, option);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classShapeGraphicsItem.html#af90bd2493a1d44d13795c96f5ead967b">_postPaint</a>(painter, option);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classShapeGraphicsItem.html#a66a0f1cdddb3e00cc3fe6d30a601ddd0">   60</a></span>&#160;QPen <a class="code" href="classShapeGraphicsItem.html#a66a0f1cdddb3e00cc3fe6d30a601ddd0">ShapeGraphicsItem::getRescaledShapeStroke</a>(<span class="keywordtype">bool</span> innerStroke)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> QPen(QBrush(<a class="code" href="classMM.html#acf236186d97df84fafc2d16d8ec227ab">MM::CONTROL_COLOR</a>), (innerStroke ? <a class="code" href="classMM.html#abfaba4dbc650e1ff9d64ed16345cdcf8">MM::SHAPE_INNER_STROKE_WIDTH</a> : <a class="code" href="classMM.html#a28ff60d0aa3a76309ffe94b7b3f4e196">MM::SHAPE_STROKE_WIDTH</a>) / <a class="code" href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">getCanvas</a>()-&gt;getZoomFactor());</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//void VertexGraphicsItem::mousePressEvent(QGraphicsSceneMouseEvent * event)</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//  ShapeGraphicsItem* shapeParent = static_cast&lt;ShapeGraphicsItem*&gt;(parentItem());</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//  if (!shapeParent-&gt;isMappingVisible())</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//  {</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//    // Prevent mouse grabbing.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//    event-&gt;ignore();</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//  else</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//  {</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//    if (shapeParent-&gt;isOutput())</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//      QGraphicsItem::mousePressEvent(event);</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//      if (event-&gt;button() == Qt::LeftButton)</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//      {</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//        MainWindow::instance()-&gt;setCurrentMapping(shapeParent-&gt;getMapping()-&gt;getId());</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//    else</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//      if (shapeParent-&gt;isMappingCurrent())</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//        QGraphicsItem::mousePressEvent(event);</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//      else</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//        event-&gt;ignore(); // prevent mousegrabbing on non-current mapping</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//void VertexGraphicsItem::paint(QPainter *painter,</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//    const QStyleOptionGraphicsItem *option,</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//    QWidget* widget)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//{</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//  Q_UNUSED(widget);</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span><span class="comment">//}</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classColorGraphicsItem.html#a96caf1e211c139e921e00f32cdead90e">  112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classColorGraphicsItem.html#a96caf1e211c139e921e00f32cdead90e">ColorGraphicsItem::_prePaint</a>(QPainter *painter,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                  <span class="keyword">const</span> QStyleOptionGraphicsItem *option)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classColor.html">Color</a>* color = <span class="keyword">static_cast&lt;</span><a class="code" href="classColor.html">Color</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getPaint().data());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  Q_ASSERT(color);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  painter-&gt;setPen(Qt::NoPen);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// Set brush.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  QColor col = color-&gt;<a class="code" href="classColor.html#a2eb88895a9d7f67823b6ec7a4c6c5b3b">getColor</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  col.setAlphaF(<a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getOpacity());</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  painter-&gt;setBrush(col);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classPolygonColorGraphicsItem.html#a9506e8822007d63284a93d215d3ea43f">  126</a></span>&#160;<a class="code" href="classPolygonColorGraphicsItem.html#a9506e8822007d63284a93d215d3ea43f">PolygonColorGraphicsItem::PolygonColorGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  : <a class="code" href="classColorGraphicsItem.html">ColorGraphicsItem</a>(mapping, output) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">_controlPainter</a>.reset(<span class="keyword">new</span> <a class="code" href="classPolygonControlPainter.html">PolygonControlPainter</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classPolygonColorGraphicsItem.html#a280e95a1785277689dc6a8d8e91e9186">  131</a></span>&#160;QPainterPath <a class="code" href="classPolygonColorGraphicsItem.html#a280e95a1785277689dc6a8d8e91e9186">PolygonColorGraphicsItem::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  QPainterPath path;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classPolygon.html">Polygon</a>* poly = <span class="keyword">static_cast&lt;</span><a class="code" href="classPolygon.html">Polygon</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>.data());</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  Q_ASSERT(poly);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  path.addPolygon(poly-&gt;<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>());</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">return</span> mapFromScene(path);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classPolygonColorGraphicsItem.html#ade817253f12a34aeeddc85a90410fdfa">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classPolygonColorGraphicsItem.html#ade817253f12a34aeeddc85a90410fdfa">PolygonColorGraphicsItem::_doPaint</a>(QPainter *painter,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                        <span class="keyword">const</span> QStyleOptionGraphicsItem *option)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  Q_UNUSED(option);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classPolygon.html">Polygon</a>* poly = <span class="keyword">static_cast&lt;</span><a class="code" href="classPolygon.html">Polygon</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>.data());</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  Q_ASSERT(poly);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  painter-&gt;drawPolygon(mapFromScene(poly-&gt;<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>()));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classEllipseColorGraphicsItem.html#a250be09079ee36da5d82612bdbd56357">  149</a></span>&#160;<a class="code" href="classEllipseColorGraphicsItem.html#a250be09079ee36da5d82612bdbd56357">EllipseColorGraphicsItem::EllipseColorGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  : <a class="code" href="classColorGraphicsItem.html">ColorGraphicsItem</a>(mapping, output) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">_controlPainter</a>.reset(<span class="keyword">new</span> <a class="code" href="classEllipseControlPainter.html">EllipseControlPainter</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classEllipseColorGraphicsItem.html#a1e5f1f39a33c4824ef9b9bd530eb5628">  154</a></span>&#160;QPainterPath <a class="code" href="classEllipseColorGraphicsItem.html#a1e5f1f39a33c4824ef9b9bd530eb5628">EllipseColorGraphicsItem::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// Create path for ellipse.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  QPainterPath path;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classEllipse.html">Ellipse</a>* ellipse = <span class="keyword">static_cast&lt;</span><a class="code" href="classEllipse.html">Ellipse</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>.data());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  Q_ASSERT(ellipse);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  QTransform transform;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  transform.translate(ellipse-&gt;<a class="code" href="classEllipse.html#a45e3a08914eda116e521b28505567c99">getCenter</a>().x(), ellipse-&gt;<a class="code" href="classEllipse.html#a45e3a08914eda116e521b28505567c99">getCenter</a>().y());</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  transform.rotate(ellipse-&gt;<a class="code" href="classEllipse.html#a41bb574712c32c3de25c7854ad60ad93">getRotation</a>());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  path.addEllipse(QPoint(0,0), ellipse-&gt;<a class="code" href="classEllipse.html#a7d140ab03fbb96ec8ea8447e10e65b70">getHorizontalRadius</a>(), ellipse-&gt;<a class="code" href="classEllipse.html#af56d0e5ab3a476768b3b3b9b49d239ac">getVerticalRadius</a>());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> mapFromScene(transform.map(path));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classEllipseColorGraphicsItem.html#ab666d63e62258aee71187f217774afec">  167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classEllipseColorGraphicsItem.html#ab666d63e62258aee71187f217774afec">EllipseColorGraphicsItem::_doPaint</a>(QPainter* painter,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                        <span class="keyword">const</span> QStyleOptionGraphicsItem* option)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  Q_UNUSED(option);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// Just draw the path.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  painter-&gt;drawPath(<a class="code" href="classEllipseColorGraphicsItem.html#a1e5f1f39a33c4824ef9b9bd530eb5628">shape</a>());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classTextureGraphicsItem.html#a58c276efcf0c8c0ceddaeed960612106">  175</a></span>&#160;<a class="code" href="classTextureGraphicsItem.html#a58c276efcf0c8c0ceddaeed960612106">TextureGraphicsItem::TextureGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  : <a class="code" href="classShapeGraphicsItem.html">ShapeGraphicsItem</a>(mapping, output)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="classTextureGraphicsItem.html#ac654f900d4ee7e92e96b23ac26d0e09c">_textureMapping</a> = qSharedPointerCast&lt;TextureMapping&gt;(mapping);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  Q_CHECK_PTR(<a class="code" href="classTextureGraphicsItem.html#ac654f900d4ee7e92e96b23ac26d0e09c">_textureMapping</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a> = qSharedPointerCast&lt;Texture&gt;(<a class="code" href="classTextureGraphicsItem.html#ac654f900d4ee7e92e96b23ac26d0e09c">_textureMapping</a>.toStrongRef()-&gt;getPaint());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  Q_CHECK_PTR(<a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">_inputShape</a> = qSharedPointerCast&lt;MShape&gt;(<a class="code" href="classTextureGraphicsItem.html#ac654f900d4ee7e92e96b23ac26d0e09c">_textureMapping</a>.toStrongRef()-&gt;getInputShape());</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  Q_CHECK_PTR(<a class="code" href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">_inputShape</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classTextureGraphicsItem.html#a444c9470ae70bf1c277baaf0d0d70475">  188</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTextureGraphicsItem.html#a444c9470ae70bf1c277baaf0d0d70475">TextureGraphicsItem::_doPaint</a>(QPainter *painter,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                   <span class="keyword">const</span> QStyleOptionGraphicsItem *option)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  Q_UNUSED(option);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// Perform the actual mapping (done by subclasses).</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>())</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classTextureGraphicsItem.html#ae912215241614cef996d597affa2fd5b">_doDrawOutput</a>(painter);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classTextureGraphicsItem.html#a73dbad4408293dccec1c265b1c7d81e0">_doDrawInput</a>(painter);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classTextureGraphicsItem.html#a73dbad4408293dccec1c265b1c7d81e0">  199</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTextureGraphicsItem.html#a73dbad4408293dccec1c265b1c7d81e0">TextureGraphicsItem::_doDrawInput</a>(QPainter* painter)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  Q_UNUSED(painter);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#ace336beca655965fff6324b788f2c571">isMappingCurrent</a>())</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// FIXME: Does this draw the quad counterclockwise?</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    glBegin (GL_QUADS);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      QRectF rect = mapFromScene(<a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>.toStrongRef()-&gt;getRect()).<a class="code" href="classShapeGraphicsItem.html#ae310124e3aaeb1d4654fd84e4b99308b">boundingRect</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="namespaceUtil.html#a2705241815455b8999c6e9d04530f740">Util::correctGlTexCoord</a>(0, 0);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      glVertex3f (rect.x(), rect.y(), 0);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="namespaceUtil.html#a2705241815455b8999c6e9d04530f740">Util::correctGlTexCoord</a>(1, 0);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      glVertex3f (rect.x() + rect.width(), rect.y(), 0);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="namespaceUtil.html#a2705241815455b8999c6e9d04530f740">Util::correctGlTexCoord</a>(1, 1);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      glVertex3f (rect.x()+rect.width(), rect.y()+rect.height(), 0);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="namespaceUtil.html#a2705241815455b8999c6e9d04530f740">Util::correctGlTexCoord</a>(0, 1);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      glVertex3f (rect.x(), rect.y()+rect.height(), 0);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    glEnd ();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="classTextureGraphicsItem.html#ab4bf49309357593ce81a1b73a3c487fa">  225</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTextureGraphicsItem.html#ab4bf49309357593ce81a1b73a3c487fa">TextureGraphicsItem::_prePaint</a>(QPainter* painter,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                    <span class="keyword">const</span> QStyleOptionGraphicsItem *option)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  Q_UNUSED(option);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  painter-&gt;beginNativePainting();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  QSharedPointer&lt;Texture&gt; texture = <a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>.toStrongRef();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Only works for similar shapes.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// TODO:remettre</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">//Q_ASSERT( _inputShape-&gt;nVertices() == outputShape-&gt;nVertices());</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// Project source texture and sent it to destination.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  texture-&gt;update();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// Allow alpha blending.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  glEnable (GL_BLEND);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// Get texture.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  glEnable (GL_TEXTURE_2D);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  glBindTexture(GL_TEXTURE_2D, texture-&gt;getTextureId());</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// Copy bits to texture iff necessary.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  texture-&gt;lockMutex();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (texture-&gt;bitsHaveChanged())</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        texture-&gt;getWidth(), texture-&gt;getHeight(), 0, GL_RGBA,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      GL_UNSIGNED_BYTE, texture-&gt;getBits());</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  texture-&gt;unlockMutex();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_BORDER);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_BORDER);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// Set texture color (apply opacity).</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  glColor4f(1.0f, 1.0f, 1.0f,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>() ? <a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getOpacity() : <a class="code" href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">getMapping</a>()-&gt;getPaint()-&gt;getOpacity());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="classTextureGraphicsItem.html#a6a7473312832a567be43e976fe012f85">  268</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTextureGraphicsItem.html#a6a7473312832a567be43e976fe012f85">TextureGraphicsItem::_postPaint</a>(QPainter* painter,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                     <span class="keyword">const</span> QStyleOptionGraphicsItem *option)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  Q_UNUSED(option);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  glDisable(GL_TEXTURE_2D);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  painter-&gt;endNativePainting();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classPolygonTextureGraphicsItem.html#ae4501707821a1d1968236e67e587e33f">  278</a></span>&#160;QPainterPath <a class="code" href="classPolygonTextureGraphicsItem.html#ae4501707821a1d1968236e67e587e33f">PolygonTextureGraphicsItem::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  QPainterPath path;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classPolygon.html">Polygon</a>* poly = <span class="keyword">static_cast&lt;</span><a class="code" href="classPolygon.html">Polygon</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>.data());</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  Q_ASSERT(poly);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  path.addPolygon(poly-&gt;<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>());</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">return</span> mapFromScene(path);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="classPolygonTextureGraphicsItem.html#a6da9326eed742ade5870774538ab907b">  287</a></span>&#160;QRectF <a class="code" href="classPolygonTextureGraphicsItem.html#a6da9326eed742ade5870774538ab907b">PolygonTextureGraphicsItem::boundingRect</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classPolygonTextureGraphicsItem.html#ae4501707821a1d1968236e67e587e33f">shape</a>().boundingRect();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classTriangleTextureGraphicsItem.html#acdb0ce112cba4b749fc493dd93ce0783">  291</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classTriangleTextureGraphicsItem.html#acdb0ce112cba4b749fc493dd93ce0783">TriangleTextureGraphicsItem::_doDrawOutput</a>(QPainter* painter)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  Q_UNUSED(painter);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>())</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classMShape.html#abaea0495adea6f577e352d8d90fe161e">MShape::ptr</a> inputShape = <a class="code" href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">_inputShape</a>.toStrongRef();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    glBegin(GL_TRIANGLES);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;inputShape-&gt;nVertices(); i++)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a>(*<a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>.toStrongRef(), inputShape-&gt;getVertex(i), mapFromScene(<a class="code" href="classShapeGraphicsItem.html#a0616e5da39fa76e4a488d93088031731">getShape</a>()-&gt;getVertex(i)));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    glEnd();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classPolygonTextureGraphicsItem.html#a2c65a610b9925bb22b2385c90ae3c8e1">  308</a></span>&#160;<a class="code" href="classPolygonTextureGraphicsItem.html#a2c65a610b9925bb22b2385c90ae3c8e1">PolygonTextureGraphicsItem::PolygonTextureGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output) : <a class="code" href="classTextureGraphicsItem.html">TextureGraphicsItem</a>(mapping, output) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">_controlPainter</a>.reset(<span class="keyword">new</span> <a class="code" href="classPolygonControlPainter.html">PolygonControlPainter</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classMeshTextureGraphicsItem.html#a40e96a41749969c5929cfcae95d48687">  312</a></span>&#160;<a class="code" href="classMeshTextureGraphicsItem.html#a40e96a41749969c5929cfcae95d48687">MeshTextureGraphicsItem::MeshTextureGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output) : <a class="code" href="classPolygonTextureGraphicsItem.html">PolygonTextureGraphicsItem</a>(mapping, output) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">_controlPainter</a>.reset(<span class="keyword">new</span> <a class="code" href="classMeshControlPainter.html">MeshControlPainter</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="classMeshTextureGraphicsItem.html#a5954a174a515f71e9023ee49cc02f9ed">_nHorizontalQuads</a> = <a class="code" href="classMeshTextureGraphicsItem.html#a510d39f31dd411023fff69e82c43d277">_nVerticalQuads</a> = -1;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="classMeshTextureGraphicsItem.html#ac8e1259b2bea06eaaa06e9e40c3904f5">_wasGrabbing</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classMeshTextureGraphicsItem.html#a37548c26ad6a064019698df0f4ecf573">  318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMeshTextureGraphicsItem.html#a37548c26ad6a064019698df0f4ecf573">MeshTextureGraphicsItem::_doDrawOutput</a>(QPainter* painter)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  Q_UNUSED(painter);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">isOutput</a>())</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    QSharedPointer&lt;Mesh&gt; outputMesh = qSharedPointerCast&lt;Mesh&gt;(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    QSharedPointer&lt;Mesh&gt; inputMesh  = qSharedPointerCast&lt;Mesh&gt;(<a class="code" href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">_inputShape</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    QVector&lt;QVector&lt;Quad&gt; &gt; outputQuads = outputMesh-&gt;getQuads2d();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    QVector&lt;QVector&lt;Quad&gt; &gt; inputQuads  = inputMesh-&gt;getQuads2d();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Check if we increased or decreased number of columns/rows in mesh.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordtype">bool</span> forceRebuild = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMeshTextureGraphicsItem.html#a5954a174a515f71e9023ee49cc02f9ed">_nHorizontalQuads</a> != outputMesh-&gt;nHorizontalQuads() ||</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="classMeshTextureGraphicsItem.html#a510d39f31dd411023fff69e82c43d277">_nVerticalQuads</a> != outputMesh-&gt;nVerticalQuads())</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      forceRebuild = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="classMeshTextureGraphicsItem.html#a1650e6b56784087f06f384d61df021f0">_cachedQuadItems</a>.resize(<a class="code" href="classMeshTextureGraphicsItem.html#a5954a174a515f71e9023ee49cc02f9ed">_nHorizontalQuads</a> = outputMesh-&gt;nHorizontalQuads());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classMeshTextureGraphicsItem.html#a5954a174a515f71e9023ee49cc02f9ed">_nHorizontalQuads</a>; i++)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="classMeshTextureGraphicsItem.html#a1650e6b56784087f06f384d61df021f0">_cachedQuadItems</a>[i].resize(<a class="code" href="classMeshTextureGraphicsItem.html#a510d39f31dd411023fff69e82c43d277">_nVerticalQuads</a> = outputMesh-&gt;nVerticalQuads());</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// Keep track of whether we are currently grabbing the shape or a vertex so as to</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// reduce resolution when editing (to prevent lags).</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">bool</span> grabbing = (<a class="code" href="classShapeGraphicsItem.html#ace336beca655965fff6324b788f2c571">isMappingCurrent</a>() &amp;&amp;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                     (<a class="code" href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">getCanvas</a>()-&gt;<a class="code" href="classMapperGLCanvas.html#a6bcb1df29a0f7a878ab6cf688ec1b2ea">shapeGrabbed</a>() || <a class="code" href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">getCanvas</a>()-&gt;<a class="code" href="classMapperGLCanvas.html#a34902d8167362aa7a92b182456563b02">vertexGrabbed</a>()));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// Max depth is adjusted to draw less quads during click &amp; drag.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> maxDepth = (grabbing ? <a class="code" href="classMM.html#a9d1b4e72ee33676165354f33525362cf">MM::MESH_SUBDIVISION_MAX_DEPTH_EDITING</a> : <a class="code" href="classMM.html#a0103be4e11a1583667c0a60f007aebcd">MM::MESH_SUBDIVISION_MAX_DEPTH</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Force rebuild on shape/vertex release.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMeshTextureGraphicsItem.html#ac8e1259b2bea06eaaa06e9e40c3904f5">_wasGrabbing</a> &amp;&amp; !grabbing) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      forceRebuild = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="classMeshTextureGraphicsItem.html#ac8e1259b2bea06eaaa06e9e40c3904f5">_wasGrabbing</a> = grabbing;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// Go through the mesh quad by quad.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; outputMesh-&gt;nHorizontalQuads(); x++)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; outputMesh-&gt;nVerticalQuads(); y++)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <a class="code" href="classQuad.html">Quad</a>&amp; inputQuad  = inputQuads[x][y];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <a class="code" href="classQuad.html">Quad</a>&amp; outputQuad = outputQuads[x][y];</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// Verify if item needs recomputing.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html">CacheQuadItem</a>&amp; item = <a class="code" href="classMeshTextureGraphicsItem.html#a1650e6b56784087f06f384d61df021f0">_cachedQuadItems</a>[x][y];</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (forceRebuild ||</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#a9f600bde3835d46614d4265ba990527b">parent</a>.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a189b498a3edeecfde42eab4e481fd110">input</a>.<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>()  != inputQuad.<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>() ||</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#a9f600bde3835d46614d4265ba990527b">parent</a>.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a2612d5311718626713c4509b5189c419">output</a>.<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>() != outputQuad.<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>()) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;          <span class="comment">// Copy input and output quads for verification purposes.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#a9f600bde3835d46614d4265ba990527b">parent</a>.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a189b498a3edeecfde42eab4e481fd110">input</a>  = inputQuad;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#a9f600bde3835d46614d4265ba990527b">parent</a>.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a2612d5311718626713c4509b5189c419">output</a> = outputQuad;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          <span class="comment">// Recompute sub quads.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#adcea604e34b9c740b0958f5a96a51a87">subQuads</a>.clear();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          QSizeF size = mapFromScene(outputQuad.<a class="code" href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">toPolygon</a>()).<a class="code" href="classPolygonTextureGraphicsItem.html#a6da9326eed742ade5870774538ab907b">boundingRect</a>().size();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;          <span class="keywordtype">float</span> area = size.width() * size.height();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;          <span class="comment">// Rebuild cache quad item.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;          <a class="code" href="classMeshTextureGraphicsItem.html#a6f6a39a9a10b94d4176d50d4551682fe">_buildCacheQuadItem</a>(item, inputQuad, outputQuad, area, 0.0001f, 0.001f, <a class="code" href="classMM.html#a5270defadf36dc4b153bb2455565399a">MM::MESH_SUBDIVISION_MIN_AREA</a>, maxDepth);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// Draw all the cached items.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">foreach</span> (<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html">CacheQuadMapping</a> m, item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#adcea604e34b9c740b0958f5a96a51a87">subQuads</a>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          glBegin(GL_QUADS);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; outputQuad.<a class="code" href="classMShape.html#ab43b5ed4a2451cd5d1b1aeeb308fb1c0">nVertices</a>(); i++)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a>(*<a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>.toStrongRef(), m.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a189b498a3edeecfde42eab4e481fd110">input</a>.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(i), mapFromScene(m.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a2612d5311718626713c4509b5189c419">output</a>.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(i)));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;          }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          glEnd();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="classMeshTextureGraphicsItem.html#a6f6a39a9a10b94d4176d50d4551682fe">  396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMeshTextureGraphicsItem.html#a6f6a39a9a10b94d4176d50d4551682fe">MeshTextureGraphicsItem::_buildCacheQuadItem</a>(<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html">CacheQuadItem</a>&amp; item, <span class="keyword">const</span> <a class="code" href="classQuad.html">Quad</a>&amp; inputQuad, <span class="keyword">const</span> <a class="code" href="classQuad.html">Quad</a>&amp; outputQuad, <span class="keywordtype">float</span> outputArea, <span class="keywordtype">float</span> inputThreshod, <span class="keywordtype">float</span> outputThreshold, <span class="keywordtype">int</span> minArea, <span class="keywordtype">int</span> maxDepth)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">bool</span> stop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (maxDepth == 0 || outputArea &lt; minArea)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    stop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    QPointF oa = mapFromScene(outputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(0));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    QPointF ob = mapFromScene(outputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(1));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    QPointF oc = mapFromScene(outputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(2));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    QPointF od = mapFromScene(outputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(3));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    QPointF ia = inputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(0);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    QPointF ib = inputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(1);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    QPointF ic = inputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(2);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    QPointF <span class="keywordtype">id</span> = inputQuad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(3);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    QPointF outputV1 = oa-ob;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    QPointF outputV2 = oc-ob;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    QPointF outputV3 = oc-od;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    QPointF outputV4 = oa-od;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    QPointF inputV1 = ia-ib;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    QPointF inputV2 = ic-ib;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    QPointF inputV3 = ic-id;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    QPointF inputV4 = ia-id;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// compute the dot products for the polygon</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">float</span> outputV1dotV2 = QPointF::dotProduct(outputV1, outputV2);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">float</span> outputV3dotV4 = QPointF::dotProduct(outputV3, outputV4);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">float</span> outputV1dotV4 = QPointF::dotProduct(outputV1, outputV4);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">float</span> outputV2dotV3 = QPointF::dotProduct(outputV2, outputV3);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// compute the dot products for the texture</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">float</span> inputV1dotV2  = QPointF::dotProduct(inputV1, inputV2);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">float</span> inputV3dotV4  = QPointF::dotProduct(inputV3, inputV4);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordtype">float</span> inputV1dotV4  = QPointF::dotProduct(inputV1, inputV4);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">float</span> inputV2dotV3  = QPointF::dotProduct(inputV2, inputV3);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// Stopping criterion.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    stop = (fabs(outputV1dotV2 - outputV3dotV4) &lt; outputThreshold &amp;&amp;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            fabs(outputV1dotV4 - outputV2dotV3) &lt; outputThreshold &amp;&amp;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            fabs(inputV1dotV2  - inputV3dotV4)  &lt; inputThreshod &amp;&amp;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            fabs(inputV1dotV4  - inputV2dotV3)  &lt; inputThreshod);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">if</span> (stop)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    item.<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#adcea604e34b9c740b0958f5a96a51a87">subQuads</a>.append( (<a class="code" href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html">CacheQuadMapping</a>){ inputQuad, outputQuad } );</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">else</span> <span class="comment">// subdivide</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    QList&lt;Quad&gt; inputSubQuads  = <a class="code" href="classMeshTextureGraphicsItem.html#ac93a420e865659c8c034fb78110326e2">_split</a>(inputQuad);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    QList&lt;Quad&gt; outputSubQuads = <a class="code" href="classMeshTextureGraphicsItem.html#ac93a420e865659c8c034fb78110326e2">_split</a>(outputQuad);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; inputSubQuads.size(); i++)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <a class="code" href="classMeshTextureGraphicsItem.html#a6f6a39a9a10b94d4176d50d4551682fe">_buildCacheQuadItem</a>(item, inputSubQuads[i], outputSubQuads[i], outputArea*0.25, inputThreshod, outputThreshold, minArea, (maxDepth == -1 ? -1 : maxDepth - 1));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="classMeshTextureGraphicsItem.html#ac93a420e865659c8c034fb78110326e2">  457</a></span>&#160;QList&lt;Quad&gt; <a class="code" href="classMeshTextureGraphicsItem.html#ac93a420e865659c8c034fb78110326e2">MeshTextureGraphicsItem::_split</a>(<span class="keyword">const</span> <a class="code" href="classQuad.html">Quad</a>&amp; quad)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  QList&lt;Quad&gt; quads;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  QPointF a = quad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(0);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  QPointF b = quad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(1);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  QPointF c = quad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(2);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  QPointF d = quad.<a class="code" href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">getVertex</a>(3);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  QPointF ab = (a + b) * 0.5f;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  QPointF bc = (b + c) * 0.5f;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  QPointF cd = (c + d) * 0.5f;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  QPointF ad = (a + d) * 0.5f;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  QPointF abcd = (ab + cd) * 0.5f;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  quads.append(<a class="code" href="classQuad.html">Quad</a>(a, ab, abcd, ad));</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  quads.append(<a class="code" href="classQuad.html">Quad</a>(ab, b, bc, abcd));</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  quads.append(<a class="code" href="classQuad.html">Quad</a>(abcd, bc, c, cd));</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  quads.append(<a class="code" href="classQuad.html">Quad</a>(ad, abcd, cd, d));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> quads;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a44b9651c250892927e4e58b3c8136f4e">  481</a></span>&#160;<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a44b9651c250892927e4e58b3c8136f4e">EllipseTextureGraphicsItem::DrawingData::DrawingData</a>(<span class="keyword">const</span> QSharedPointer&lt;Ellipse&gt;&amp; ellipse)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Gather basic definitions.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a92f76fd20201855839cfad786178f367">center</a>           = ellipse-&gt;getCenter();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#acc431660fafb09fa212eaeb0ca67059b">controlCenter</a>    = ellipse-&gt;getVertex(4);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#af752ce12507a7e478f1770a0c4ad226f">horizontalRadius</a> = ellipse-&gt;getHorizontalRadius();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a8b071e504ca0384b75344a0beb4ded9a">verticalRadius</a>   = ellipse-&gt;getVerticalRadius();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a87d7100b4b0099ad0fde52483d56446e">rotation</a>         = ellipse-&gt;getRotationRadians();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// Compute quarter angles.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keyword">const</span> QPointF&amp; unitControlCenter  = ellipse-&gt;toUnitCircle().map(<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#acc431660fafb09fa212eaeb0ca67059b">controlCenter</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordtype">float</span> inputAngle1 = asin(unitControlCenter.y());</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">float</span> inputAngle2 = acos(unitControlCenter.x());</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a308251fcdf274d5ffb09b1cd436d9861">quarterAngles</a>[0] = inputAngle1;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  quarterAngles[1] = inputAngle2;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  quarterAngles[2] = M_PI   - inputAngle1;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  quarterAngles[3] = 2*M_PI - inputAngle2;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a80c399719d24272bd6145f0ec96303fa">  500</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a80c399719d24272bd6145f0ec96303fa">EllipseTextureGraphicsItem::DrawingData::getSpanInQuarter</a>(<span class="keywordtype">int</span> quarter)<span class="keyword"> const</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordtype">float</span> angleSpan = quarterAngles[(quarter+1)%<a class="code" href="classEllipseTextureGraphicsItem.html#a3ebe1c77392f70d2c2e65fb241069945">N_QUARTERS</a>] - quarterAngles[quarter];</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">while</span> (angleSpan &lt; 0) angleSpan += 2*M_PI;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> angleSpan;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a0c2db90f9edec2607ca5dce1791938cb">  507</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a0c2db90f9edec2607ca5dce1791938cb">EllipseTextureGraphicsItem::DrawingData::setPointOfEllipseAtAngle</a>(QPointF&amp; point, <span class="keywordtype">float</span> circularAngle)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">float</span> xCirc = cos(circularAngle) * horizontalRadius; <span class="comment">// this looks really weird...</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordtype">float</span> yCirc = sin(circularAngle) * verticalRadius;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordtype">float</span> distance = sqrt( xCirc*xCirc + yCirc*yCirc );</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordtype">float</span> angle    = atan2( yCirc, xCirc );</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  point.setX( cos(angle + rotation) * distance + center.x() );</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  point.setY( sin(angle + rotation) * distance + center.y() );</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem.html#a57f5c649efbacaea281bef1cf5234c74">  517</a></span>&#160;<a class="code" href="classEllipseTextureGraphicsItem.html#a57f5c649efbacaea281bef1cf5234c74">EllipseTextureGraphicsItem::EllipseTextureGraphicsItem</a>(<a class="code" href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a> mapping, <span class="keywordtype">bool</span> output) : <a class="code" href="classTextureGraphicsItem.html">TextureGraphicsItem</a>(mapping, output) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">_controlPainter</a>.reset(<span class="keyword">new</span> <a class="code" href="classEllipseControlPainter.html">EllipseControlPainter</a>(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem.html#a5a3ce56c292f77431d1ffc185a6c20ea">  521</a></span>&#160;QPainterPath <a class="code" href="classEllipseTextureGraphicsItem.html#a5a3ce56c292f77431d1ffc185a6c20ea">EllipseTextureGraphicsItem::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// Create path for ellipse.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  QPainterPath path;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classEllipse.html">Ellipse</a>* ellipse = <span class="keyword">static_cast&lt;</span><a class="code" href="classEllipse.html">Ellipse</a>*<span class="keyword">&gt;</span>(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>.data());</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  Q_ASSERT(ellipse);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  QTransform transform;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  transform.translate(ellipse-&gt;<a class="code" href="classEllipse.html#a45e3a08914eda116e521b28505567c99">getCenter</a>().x(), ellipse-&gt;<a class="code" href="classEllipse.html#a45e3a08914eda116e521b28505567c99">getCenter</a>().y());</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  transform.rotate(ellipse-&gt;<a class="code" href="classEllipse.html#a41bb574712c32c3de25c7854ad60ad93">getRotation</a>());</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  path.addEllipse(QPoint(0,0), ellipse-&gt;<a class="code" href="classEllipse.html#a7d140ab03fbb96ec8ea8447e10e65b70">getHorizontalRadius</a>(), ellipse-&gt;<a class="code" href="classEllipse.html#af56d0e5ab3a476768b3b3b9b49d239ac">getVerticalRadius</a>());</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">return</span> mapFromScene(transform.map(path));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem.html#a6d786821897bf8816022e9930a2047ef">  534</a></span>&#160;QRectF <a class="code" href="classEllipseTextureGraphicsItem.html#a6d786821897bf8816022e9930a2047ef">EllipseTextureGraphicsItem::boundingRect</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classEllipseTextureGraphicsItem.html#a5a3ce56c292f77431d1ffc185a6c20ea">shape</a>().boundingRect();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="classEllipseTextureGraphicsItem.html#add3ff2898043c44d4b10ab7df81bb655">  539</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classEllipseTextureGraphicsItem.html#add3ff2898043c44d4b10ab7df81bb655">EllipseTextureGraphicsItem::_doDrawOutput</a>(QPainter* painter)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  Q_UNUSED(painter);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// Get input and output ellipses.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  QSharedPointer&lt;Ellipse&gt; inputEllipse  = qSharedPointerCast&lt;Ellipse&gt;(<a class="code" href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">_inputShape</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  QSharedPointer&lt;Ellipse&gt; outputEllipse = qSharedPointerCast&lt;Ellipse&gt;(<a class="code" href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">_shape</a>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  QSharedPointer&lt;Texture&gt; texture = <a class="code" href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">_texture</a>.toStrongRef();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// Data for calculating drawing.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html">DrawingData</a> inputData(inputEllipse);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html">DrawingData</a> outputData(outputEllipse);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// Points that contain the triangle positions on the border of the ellipse.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  QPointF currentInputPoint;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  QPointF prevInputPoint(0, 0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  QPointF currentOutputPoint;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  QPointF prevOutputPoint(0, 0);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// Draw each quarter of the ellipse.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEllipseTextureGraphicsItem.html#a3ebe1c77392f70d2c2e65fb241069945">N_QUARTERS</a>; i++)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// Total angle range of current quarter.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordtype">float</span> inputAngleSpanInQuarter  = inputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a80c399719d24272bd6145f0ec96303fa">getSpanInQuarter</a>(i);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">float</span> outputAngleSpanInQuarter = outputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a80c399719d24272bd6145f0ec96303fa">getSpanInQuarter</a>(i);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// N. triangles (computed according to output).</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordtype">int</span> nTrianglesInQuarter  = ceil(outputAngleSpanInQuarter / (2*M_PI) * <a class="code" href="classMM.html#aab41a32b925a41f7adc9c62a2f351a0a">MM::ELLIPSE_N_TRIANGLES</a>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// Angle per triangle.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordtype">float</span> inputAnglePerTriangle  = inputAngleSpanInQuarter / nTrianglesInQuarter;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordtype">float</span> outputAnglePerTriangle = outputAngleSpanInQuarter / nTrianglesInQuarter;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">float</span> inputAngle  = inputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a308251fcdf274d5ffb09b1cd436d9861">quarterAngles</a>[i];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordtype">float</span> outputAngle = outputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a308251fcdf274d5ffb09b1cd436d9861">quarterAngles</a>[i];</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;=nTrianglesInQuarter; j++, inputAngle += inputAnglePerTriangle, outputAngle += outputAnglePerTriangle)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">// Set next (current) points.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      inputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a0c2db90f9edec2607ca5dce1791938cb">setPointOfEllipseAtAngle</a>(currentInputPoint, inputAngle);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      outputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a0c2db90f9edec2607ca5dce1791938cb">setPointOfEllipseAtAngle</a>(currentOutputPoint, outputAngle);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (j &gt; 0) <span class="comment">// We don&#39;t draw the first triangle.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// Draw triangle.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        glBegin(GL_TRIANGLES);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a>(*texture, inputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#acc431660fafb09fa212eaeb0ca67059b">controlCenter</a>, outputData.<a class="code" href="classEllipseTextureGraphicsItem_1_1DrawingData.html#acc431660fafb09fa212eaeb0ca67059b">controlCenter</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a>(*texture, prevInputPoint,     prevOutputPoint);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a>(*texture, currentInputPoint,  currentOutputPoint);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        glEnd();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="comment">// Save point for next iteration.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      prevInputPoint.setX(currentInputPoint.x());</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      prevInputPoint.setY(currentInputPoint.y());</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      prevOutputPoint.setX(currentOutputPoint.x());</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      prevOutputPoint.setY(currentOutputPoint.y());</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="ttc" id="classEllipse_html"><div class="ttname"><a href="classEllipse.html">Ellipse</a></div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00267">Shape.h:267</a></div></div>
<div class="ttc" id="classEllipse_html_a7d140ab03fbb96ec8ea8447e10e65b70"><div class="ttname"><a href="classEllipse.html#a7d140ab03fbb96ec8ea8447e10e65b70">Ellipse::getHorizontalRadius</a></div><div class="ttdeci">qreal getHorizontalRadius() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00338">Shape.h:338</a></div></div>
<div class="ttc" id="classMapperGLCanvas_html_a34902d8167362aa7a92b182456563b02"><div class="ttname"><a href="classMapperGLCanvas.html#a34902d8167362aa7a92b182456563b02">MapperGLCanvas::vertexGrabbed</a></div><div class="ttdeci">bool vertexGrabbed() const </div><div class="ttdef"><b>Definition:</b> <a href="MapperGLCanvas_8h_source.html#l00087">MapperGLCanvas.h:87</a></div></div>
<div class="ttc" id="classEllipseControlPainter_html"><div class="ttname"><a href="classEllipseControlPainter.html">EllipseControlPainter</a></div><div class="ttdoc">Control painter for ellipses. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeControlPainter_8h_source.html#l00065">ShapeControlPainter.h:65</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_af752ce12507a7e478f1770a0c4ad226f"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#af752ce12507a7e478f1770a0c4ad226f">EllipseTextureGraphicsItem::DrawingData::horizontalRadius</a></div><div class="ttdeci">float horizontalRadius</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00259">ShapeGraphicsItem.h:259</a></div></div>
<div class="ttc" id="classPolygon_html_abcdb0e5be74341fc6667ec22dac1aadc"><div class="ttname"><a href="classPolygon.html#abcdb0e5be74341fc6667ec22dac1aadc">Polygon::toPolygon</a></div><div class="ttdeci">virtual QPolygonF toPolygon() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8cpp_source.html#l00119">Shape.cpp:119</a></div></div>
<div class="ttc" id="classPolygonColorGraphicsItem_html_a280e95a1785277689dc6a8d8e91e9186"><div class="ttname"><a href="classPolygonColorGraphicsItem.html#a280e95a1785277689dc6a8d8e91e9186">PolygonColorGraphicsItem::shape</a></div><div class="ttdeci">virtual QPainterPath shape() const </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00131">ShapeGraphicsItem.cpp:131</a></div></div>
<div class="ttc" id="classMainWindow_html_a8626737961e658b6fdb70599d7840474"><div class="ttname"><a href="classMainWindow.html#a8626737961e658b6fdb70599d7840474">MainWindow::getCurrentMappingId</a></div><div class="ttdeci">uid getCurrentMappingId() const </div><div class="ttdef"><b>Definition:</b> <a href="MainWindow_8h_source.html#l00417">MainWindow.h:417</a></div></div>
<div class="ttc" id="classPolygon_html"><div class="ttname"><a href="classPolygon.html">Polygon</a></div><div class="ttdoc">This class represents a simple polygon (ie. </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00113">Shape.h:113</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_ac8e1259b2bea06eaaa06e9e40c3904f5"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#ac8e1259b2bea06eaaa06e9e40c3904f5">MeshTextureGraphicsItem::_wasGrabbing</a></div><div class="ttdeci">bool _wasGrabbing</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00247">ShapeGraphicsItem.h:247</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_ab4bf49309357593ce81a1b73a3c487fa"><div class="ttname"><a href="classTextureGraphicsItem.html#ab4bf49309357593ce81a1b73a3c487fa">TextureGraphicsItem::_prePaint</a></div><div class="ttdeci">void _prePaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Can be overriden to perform operations before _doPaint() is called. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00225">ShapeGraphicsItem.cpp:225</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_af90bd2493a1d44d13795c96f5ead967b"><div class="ttname"><a href="classShapeGraphicsItem.html#af90bd2493a1d44d13795c96f5ead967b">ShapeGraphicsItem::_postPaint</a></div><div class="ttdeci">virtual void _postPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Can be overriden to perform operations after _doPaint() is called. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00101">ShapeGraphicsItem.h:101</a></div></div>
<div class="ttc" id="classEllipseColorGraphicsItem_html_a1e5f1f39a33c4824ef9b9bd530eb5628"><div class="ttname"><a href="classEllipseColorGraphicsItem.html#a1e5f1f39a33c4824ef9b9bd530eb5628">EllipseColorGraphicsItem::shape</a></div><div class="ttdeci">virtual QPainterPath shape() const </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00154">ShapeGraphicsItem.cpp:154</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a2effd172b4efada4d5b96510be82dc6f"><div class="ttname"><a href="classShapeGraphicsItem.html#a2effd172b4efada4d5b96510be82dc6f">ShapeGraphicsItem::isOutput</a></div><div class="ttdeci">bool isOutput() const </div><div class="ttdoc">Return whether the item is in the destination/output (true) or source/input (false). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00069">ShapeGraphicsItem.h:69</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a80c399719d24272bd6145f0ec96303fa"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a80c399719d24272bd6145f0ec96303fa">EllipseTextureGraphicsItem::DrawingData::getSpanInQuarter</a></div><div class="ttdeci">float getSpanInQuarter(int quarter) const </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00500">ShapeGraphicsItem.cpp:500</a></div></div>
<div class="ttc" id="classMM_html_a0103be4e11a1583667c0a60f007aebcd"><div class="ttname"><a href="classMM.html#a0103be4e11a1583667c0a60f007aebcd">MM::MESH_SUBDIVISION_MAX_DEPTH</a></div><div class="ttdeci">static const int MESH_SUBDIVISION_MAX_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00081">MM.h:81</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_a6a7473312832a567be43e976fe012f85"><div class="ttname"><a href="classTextureGraphicsItem.html#a6a7473312832a567be43e976fe012f85">TextureGraphicsItem::_postPaint</a></div><div class="ttdeci">void _postPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Can be overriden to perform operations after _doPaint() is called. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00268">ShapeGraphicsItem.cpp:268</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a88e41c0845f3fc968c65b54bc438a455"><div class="ttname"><a href="classShapeGraphicsItem.html#a88e41c0845f3fc968c65b54bc438a455">ShapeGraphicsItem::_controlPainter</a></div><div class="ttdeci">QSharedPointer&lt; ShapeControlPainter &gt; _controlPainter</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00114">ShapeGraphicsItem.h:114</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html"><div class="ttname"><a href="classTextureGraphicsItem.html">TextureGraphicsItem</a></div><div class="ttdoc">Abstract class for texture graphics items. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00160">ShapeGraphicsItem.h:160</a></div></div>
<div class="ttc" id="classPolygonColorGraphicsItem_html_a9506e8822007d63284a93d215d3ea43f"><div class="ttname"><a href="classPolygonColorGraphicsItem.html#a9506e8822007d63284a93d215d3ea43f">PolygonColorGraphicsItem::PolygonColorGraphicsItem</a></div><div class="ttdeci">PolygonColorGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00126">ShapeGraphicsItem.cpp:126</a></div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadItem_html"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html">MeshTextureGraphicsItem::CacheQuadItem</a></div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00219">ShapeGraphicsItem.h:219</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a2a6f8de450ff9536f11bc06b4493c439"><div class="ttname"><a href="classShapeGraphicsItem.html#a2a6f8de450ff9536f11bc06b4493c439">ShapeGraphicsItem::_doPaint</a></div><div class="ttdeci">virtual void _doPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)=0</div><div class="ttdoc">Main paint function that needs to be overriden (called by paint()). </div></div>
<div class="ttc" id="classColorGraphicsItem_html"><div class="ttname"><a href="classColorGraphicsItem.html">ColorGraphicsItem</a></div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00118">ShapeGraphicsItem.h:118</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html"><div class="ttname"><a href="classShapeGraphicsItem.html">ShapeGraphicsItem</a></div><div class="ttdoc">Represents a shape as part of a scene graph in one of the GL canvas. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00047">ShapeGraphicsItem.h:47</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_html_a6d786821897bf8816022e9930a2047ef"><div class="ttname"><a href="classEllipseTextureGraphicsItem.html#a6d786821897bf8816022e9930a2047ef">EllipseTextureGraphicsItem::boundingRect</a></div><div class="ttdeci">virtual QRectF boundingRect() const </div><div class="ttdoc">Returns the bounding rectangle of this item. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00534">ShapeGraphicsItem.cpp:534</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a87d7100b4b0099ad0fde52483d56446e"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a87d7100b4b0099ad0fde52483d56446e">EllipseTextureGraphicsItem::DrawingData::rotation</a></div><div class="ttdeci">float rotation</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00261">ShapeGraphicsItem.h:261</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_html_a3ebe1c77392f70d2c2e65fb241069945"><div class="ttname"><a href="classEllipseTextureGraphicsItem.html#a3ebe1c77392f70d2c2e65fb241069945">EllipseTextureGraphicsItem::N_QUARTERS</a></div><div class="ttdeci">static const int N_QUARTERS</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00253">ShapeGraphicsItem.h:253</a></div></div>
<div class="ttc" id="classMainWindow_html_ab3765a17ae8cdb5891bd873024630c3b"><div class="ttname"><a href="classMainWindow.html#ab3765a17ae8cdb5891bd873024630c3b">MainWindow::getDestinationCanvas</a></div><div class="ttdeci">MapperGLCanvas * getDestinationCanvas() const </div><div class="ttdef"><b>Definition:</b> <a href="MainWindow_8h_source.html#l00427">MainWindow.h:427</a></div></div>
<div class="ttc" id="classMShape_html_abaea0495adea6f577e352d8d90fe161e"><div class="ttname"><a href="classMShape.html#abaea0495adea6f577e352d8d90fe161e">MShape::ptr</a></div><div class="ttdeci">QSharedPointer&lt; MShape &gt; ptr</div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00047">Shape.h:47</a></div></div>
<div class="ttc" id="MainWindow_8h_html"><div class="ttname"><a href="MainWindow_8h.html">MainWindow.h</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ac7bc640d0be00fe77481e8379e7c6184"><div class="ttname"><a href="classShapeGraphicsItem.html#ac7bc640d0be00fe77481e8379e7c6184">ShapeGraphicsItem::_prePaint</a></div><div class="ttdeci">virtual void _prePaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Can be overriden to perform operations before _doPaint() is called. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00097">ShapeGraphicsItem.h:97</a></div></div>
<div class="ttc" id="classMainWindow_html_a4f7e1bd77c8b2e64bd374874ff347ede"><div class="ttname"><a href="classMainWindow.html#a4f7e1bd77c8b2e64bd374874ff347ede">MainWindow::instance</a></div><div class="ttdeci">static MainWindow * instance()</div><div class="ttdef"><b>Definition:</b> <a href="MainWindow_8cpp_source.html#l02386">MainWindow.cpp:2386</a></div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadMapping_html"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html">MeshTextureGraphicsItem::CacheQuadMapping</a></div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00213">ShapeGraphicsItem.h:213</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_html_add3ff2898043c44d4b10ab7df81bb655"><div class="ttname"><a href="classEllipseTextureGraphicsItem.html#add3ff2898043c44d4b10ab7df81bb655">EllipseTextureGraphicsItem::_doDrawOutput</a></div><div class="ttdeci">virtual void _doDrawOutput(QPainter *painter)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00539">ShapeGraphicsItem.cpp:539</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a5954a174a515f71e9023ee49cc02f9ed"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a5954a174a515f71e9023ee49cc02f9ed">MeshTextureGraphicsItem::_nHorizontalQuads</a></div><div class="ttdeci">int _nHorizontalQuads</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00243">ShapeGraphicsItem.h:243</a></div></div>
<div class="ttc" id="classMM_html_acf236186d97df84fafc2d16d8ec227ab"><div class="ttname"><a href="classMM.html#acf236186d97df84fafc2d16d8ec227ab">MM::CONTROL_COLOR</a></div><div class="ttdeci">static const QColor CONTROL_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00056">MM.h:56</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_aedaa39b3238a6a58108bbb8d14c51217"><div class="ttname"><a href="classTextureGraphicsItem.html#aedaa39b3238a6a58108bbb8d14c51217">TextureGraphicsItem::_inputShape</a></div><div class="ttdeci">QWeakPointer&lt; MShape &gt; _inputShape</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00178">ShapeGraphicsItem.h:178</a></div></div>
<div class="ttc" id="classMM_html_abfaba4dbc650e1ff9d64ed16345cdcf8"><div class="ttname"><a href="classMM.html#abfaba4dbc650e1ff9d64ed16345cdcf8">MM::SHAPE_INNER_STROKE_WIDTH</a></div><div class="ttdeci">static const qreal SHAPE_INNER_STROKE_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00061">MM.h:61</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a31c71e1c3296d7a4f66d7dcff500e5be"><div class="ttname"><a href="classShapeGraphicsItem.html#a31c71e1c3296d7a4f66d7dcff500e5be">ShapeGraphicsItem::_shape</a></div><div class="ttdeci">QWeakPointer&lt; MShape &gt; _shape</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00113">ShapeGraphicsItem.h:113</a></div></div>
<div class="ttc" id="classEllipseColorGraphicsItem_html_a250be09079ee36da5d82612bdbd56357"><div class="ttname"><a href="classEllipseColorGraphicsItem.html#a250be09079ee36da5d82612bdbd56357">EllipseColorGraphicsItem::EllipseColorGraphicsItem</a></div><div class="ttdeci">EllipseColorGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00149">ShapeGraphicsItem.cpp:149</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a409347c0bb8c17579d9e789c8a786e4e"><div class="ttname"><a href="classShapeGraphicsItem.html#a409347c0bb8c17579d9e789c8a786e4e">ShapeGraphicsItem::getCanvas</a></div><div class="ttdeci">MapperGLCanvas * getCanvas() const </div><div class="ttdoc">Returns pointer to GL canvas. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00031">ShapeGraphicsItem.cpp:31</a></div></div>
<div class="ttc" id="classMainWindow_html_a4377db0befe543fe0d7914010e21fef1"><div class="ttname"><a href="classMainWindow.html#a4377db0befe543fe0d7914010e21fef1">MainWindow::getSourceCanvas</a></div><div class="ttdeci">MapperGLCanvas * getSourceCanvas() const </div><div class="ttdef"><b>Definition:</b> <a href="MainWindow_8h_source.html#l00426">MainWindow.h:426</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ad23f14605614232fc032b5ecd54701e5"><div class="ttname"><a href="classShapeGraphicsItem.html#ad23f14605614232fc032b5ecd54701e5">ShapeGraphicsItem::isMappingVisible</a></div><div class="ttdeci">bool isMappingVisible() const </div><div class="ttdoc">Returns whether the mapping this shape is associated should be visible. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00078">ShapeGraphicsItem.h:78</a></div></div>
<div class="ttc" id="classPolygonTextureGraphicsItem_html"><div class="ttname"><a href="classPolygonTextureGraphicsItem.html">PolygonTextureGraphicsItem</a></div><div class="ttdoc">Graphics item for textured polygons (eg. triangles). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00182">ShapeGraphicsItem.h:182</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_acc431660fafb09fa212eaeb0ca67059b"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#acc431660fafb09fa212eaeb0ca67059b">EllipseTextureGraphicsItem::DrawingData::controlCenter</a></div><div class="ttdeci">QPointF controlCenter</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00258">ShapeGraphicsItem.h:258</a></div></div>
<div class="ttc" id="classEllipseColorGraphicsItem_html_ab666d63e62258aee71187f217774afec"><div class="ttname"><a href="classEllipseColorGraphicsItem.html#ab666d63e62258aee71187f217774afec">EllipseColorGraphicsItem::_doPaint</a></div><div class="ttdeci">virtual void _doPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Main paint function that needs to be overriden (called by paint()). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00167">ShapeGraphicsItem.cpp:167</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_ac654f900d4ee7e92e96b23ac26d0e09c"><div class="ttname"><a href="classTextureGraphicsItem.html#ac654f900d4ee7e92e96b23ac26d0e09c">TextureGraphicsItem::_textureMapping</a></div><div class="ttdeci">QWeakPointer&lt; TextureMapping &gt; _textureMapping</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00176">ShapeGraphicsItem.h:176</a></div></div>
<div class="ttc" id="classTriangleTextureGraphicsItem_html_acdb0ce112cba4b749fc493dd93ce0783"><div class="ttname"><a href="classTriangleTextureGraphicsItem.html#acdb0ce112cba4b749fc493dd93ce0783">TriangleTextureGraphicsItem::_doDrawOutput</a></div><div class="ttdeci">virtual void _doDrawOutput(QPainter *painter)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00291">ShapeGraphicsItem.cpp:291</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a40e96a41749969c5929cfcae95d48687"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a40e96a41749969c5929cfcae95d48687">MeshTextureGraphicsItem::MeshTextureGraphicsItem</a></div><div class="ttdeci">MeshTextureGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00312">ShapeGraphicsItem.cpp:312</a></div></div>
<div class="ttc" id="classPolygonTextureGraphicsItem_html_a2c65a610b9925bb22b2385c90ae3c8e1"><div class="ttname"><a href="classPolygonTextureGraphicsItem.html#a2c65a610b9925bb22b2385c90ae3c8e1">PolygonTextureGraphicsItem::PolygonTextureGraphicsItem</a></div><div class="ttdeci">PolygonTextureGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00308">ShapeGraphicsItem.cpp:308</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a37548c26ad6a064019698df0f4ecf573"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a37548c26ad6a064019698df0f4ecf573">MeshTextureGraphicsItem::_doDrawOutput</a></div><div class="ttdeci">virtual void _doDrawOutput(QPainter *painter)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00318">ShapeGraphicsItem.cpp:318</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_html_a5a3ce56c292f77431d1ffc185a6c20ea"><div class="ttname"><a href="classEllipseTextureGraphicsItem.html#a5a3ce56c292f77431d1ffc185a6c20ea">EllipseTextureGraphicsItem::shape</a></div><div class="ttdeci">virtual QPainterPath shape() const </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00521">ShapeGraphicsItem.cpp:521</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a44b9651c250892927e4e58b3c8136f4e"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a44b9651c250892927e4e58b3c8136f4e">EllipseTextureGraphicsItem::DrawingData::DrawingData</a></div><div class="ttdeci">DrawingData(const QSharedPointer&lt; Ellipse &gt; &amp;ellipse)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00481">ShapeGraphicsItem.cpp:481</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a92f76fd20201855839cfad786178f367"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a92f76fd20201855839cfad786178f367">EllipseTextureGraphicsItem::DrawingData::center</a></div><div class="ttdeci">QPointF center</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00257">ShapeGraphicsItem.h:257</a></div></div>
<div class="ttc" id="classPolygonTextureGraphicsItem_html_a6da9326eed742ade5870774538ab907b"><div class="ttname"><a href="classPolygonTextureGraphicsItem.html#a6da9326eed742ade5870774538ab907b">PolygonTextureGraphicsItem::boundingRect</a></div><div class="ttdeci">virtual QRectF boundingRect() const </div><div class="ttdoc">Returns the bounding rectangle of this item. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00287">ShapeGraphicsItem.cpp:287</a></div></div>
<div class="ttc" id="classQuad_html"><div class="ttname"><a href="classQuad.html">Quad</a></div><div class="ttdoc">Four-vertex shape. </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00142">Shape.h:142</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a66a0f1cdddb3e00cc3fe6d30a601ddd0"><div class="ttname"><a href="classShapeGraphicsItem.html#a66a0f1cdddb3e00cc3fe6d30a601ddd0">ShapeGraphicsItem::getRescaledShapeStroke</a></div><div class="ttdeci">QPen getRescaledShapeStroke(bool innerStroke=false)</div><div class="ttdoc">Utility function: returns a stroke with rescaled width such that the stroke appears invariant to the ...</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00060">ShapeGraphicsItem.cpp:60</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_a524148d59592510865824cbfbf2bbd17"><div class="ttname"><a href="classTextureGraphicsItem.html#a524148d59592510865824cbfbf2bbd17">TextureGraphicsItem::_texture</a></div><div class="ttdeci">QWeakPointer&lt; Texture &gt; _texture</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00177">ShapeGraphicsItem.h:177</a></div></div>
<div class="ttc" id="classEllipse_html_a45e3a08914eda116e521b28505567c99"><div class="ttname"><a href="classEllipse.html#a45e3a08914eda116e521b28505567c99">Ellipse::getCenter</a></div><div class="ttdeci">QPointF getCenter() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00323">Shape.h:323</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a1650e6b56784087f06f384d61df021f0"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a1650e6b56784087f06f384d61df021f0">MeshTextureGraphicsItem::_cachedQuadItems</a></div><div class="ttdeci">QVector&lt; QVector&lt; CacheQuadItem &gt; &gt; _cachedQuadItems</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00242">ShapeGraphicsItem.h:242</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a308251fcdf274d5ffb09b1cd436d9861"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a308251fcdf274d5ffb09b1cd436d9861">EllipseTextureGraphicsItem::DrawingData::quarterAngles</a></div><div class="ttdeci">float quarterAngles[N_QUARTERS]</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00262">ShapeGraphicsItem.h:262</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a0c2db90f9edec2607ca5dce1791938cb"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a0c2db90f9edec2607ca5dce1791938cb">EllipseTextureGraphicsItem::DrawingData::setPointOfEllipseAtAngle</a></div><div class="ttdeci">void setPointOfEllipseAtAngle(QPointF &amp;point, float circularAngle)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00507">ShapeGraphicsItem.cpp:507</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html_a8b071e504ca0384b75344a0beb4ded9a"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html#a8b071e504ca0384b75344a0beb4ded9a">EllipseTextureGraphicsItem::DrawingData::verticalRadius</a></div><div class="ttdeci">float verticalRadius</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00260">ShapeGraphicsItem.h:260</a></div></div>
<div class="ttc" id="classPolygonColorGraphicsItem_html_ade817253f12a34aeeddc85a90410fdfa"><div class="ttname"><a href="classPolygonColorGraphicsItem.html#ade817253f12a34aeeddc85a90410fdfa">PolygonColorGraphicsItem::_doPaint</a></div><div class="ttdeci">virtual void _doPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Main paint function that needs to be overriden (called by paint()). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00140">ShapeGraphicsItem.cpp:140</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_html_a57f5c649efbacaea281bef1cf5234c74"><div class="ttname"><a href="classEllipseTextureGraphicsItem.html#a57f5c649efbacaea281bef1cf5234c74">EllipseTextureGraphicsItem::EllipseTextureGraphicsItem</a></div><div class="ttdeci">EllipseTextureGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00517">ShapeGraphicsItem.cpp:517</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_a444c9470ae70bf1c277baaf0d0d70475"><div class="ttname"><a href="classTextureGraphicsItem.html#a444c9470ae70bf1c277baaf0d0d70475">TextureGraphicsItem::_doPaint</a></div><div class="ttdeci">virtual void _doPaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Main paint function that needs to be overriden (called by paint()). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00188">ShapeGraphicsItem.cpp:188</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ad56e134f78536a9a7270da1482f65b5a"><div class="ttname"><a href="classShapeGraphicsItem.html#ad56e134f78536a9a7270da1482f65b5a">ShapeGraphicsItem::ShapeGraphicsItem</a></div><div class="ttdeci">ShapeGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00025">ShapeGraphicsItem.cpp:25</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_a0616e5da39fa76e4a488d93088031731"><div class="ttname"><a href="classShapeGraphicsItem.html#a0616e5da39fa76e4a488d93088031731">ShapeGraphicsItem::getShape</a></div><div class="ttdeci">MShape::ptr getShape() const </div><div class="ttdoc">Returns the MShape (depends on mapping and whether this is an input or output). </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00060">ShapeGraphicsItem.h:60</a></div></div>
<div class="ttc" id="classMShape_html_ab43b5ed4a2451cd5d1b1aeeb308fb1c0"><div class="ttname"><a href="classMShape.html#ab43b5ed4a2451cd5d1b1aeeb308fb1c0">MShape::nVertices</a></div><div class="ttdeci">int nVertices() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00057">Shape.h:57</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a6f6a39a9a10b94d4176d50d4551682fe"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a6f6a39a9a10b94d4176d50d4551682fe">MeshTextureGraphicsItem::_buildCacheQuadItem</a></div><div class="ttdeci">void _buildCacheQuadItem(CacheQuadItem &amp;item, const Quad &amp;inputQuad, const Quad &amp;outputQuad, float outputArea, float inputThreshold=0.0001f, float outputThreshold=0.001f, int minArea=MM::MESH_SUBDIVISION_MIN_AREA, int maxDepth=-1)</div><div class="ttdoc">Builds cache item recursively using the technique described in Oliveira, M. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00396">ShapeGraphicsItem.cpp:396</a></div></div>
<div class="ttc" id="classMShape_html_a188f2b437f86ab09fd08c157c1e12dea"><div class="ttname"><a href="classMShape.html#a188f2b437f86ab09fd08c157c1e12dea">MShape::getVertex</a></div><div class="ttdeci">QPointF getVertex(int i) const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00059">Shape.h:59</a></div></div>
<div class="ttc" id="classMapperGLCanvas_html"><div class="ttname"><a href="classMapperGLCanvas.html">MapperGLCanvas</a></div><div class="ttdoc">Mother class for OpenGL canvases that allow the display and controls of shapes and vertices...</div><div class="ttdef"><b>Definition:</b> <a href="MapperGLCanvas_8h_source.html#l00047">MapperGLCanvas.h:47</a></div></div>
<div class="ttc" id="classColor_html_a2eb88895a9d7f67823b6ec7a4c6c5b3b"><div class="ttname"><a href="classColor.html#a2eb88895a9d7f67823b6ec7a4c6c5b3b">Color::getColor</a></div><div class="ttdeci">QColor getColor() const </div><div class="ttdef"><b>Definition:</b> <a href="Paint_8h_source.html#l00109">Paint.h:109</a></div></div>
<div class="ttc" id="classMapping_html_ae79d6c9d0e86634b92c955962aaeabdc"><div class="ttname"><a href="classMapping.html#ae79d6c9d0e86634b92c955962aaeabdc">Mapping::ptr</a></div><div class="ttdeci">QSharedPointer&lt; Mapping &gt; ptr</div><div class="ttdef"><b>Definition:</b> <a href="Mapping_8h_source.html#l00067">Mapping.h:67</a></div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadItem_html_a9f600bde3835d46614d4265ba990527b"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#a9f600bde3835d46614d4265ba990527b">MeshTextureGraphicsItem::CacheQuadItem::parent</a></div><div class="ttdeci">CacheQuadMapping parent</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00220">ShapeGraphicsItem.h:220</a></div></div>
<div class="ttc" id="classMM_html_a28ff60d0aa3a76309ffe94b7b3f4e196"><div class="ttname"><a href="classMM.html#a28ff60d0aa3a76309ffe94b7b3f4e196">MM::SHAPE_STROKE_WIDTH</a></div><div class="ttdeci">static const qreal SHAPE_STROKE_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00060">MM.h:60</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_ae912215241614cef996d597affa2fd5b"><div class="ttname"><a href="classTextureGraphicsItem.html#ae912215241614cef996d597affa2fd5b">TextureGraphicsItem::_doDrawOutput</a></div><div class="ttdeci">virtual void _doDrawOutput(QPainter *painter)=0</div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadItem_html_adcea604e34b9c740b0958f5a96a51a87"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadItem.html#adcea604e34b9c740b0958f5a96a51a87">MeshTextureGraphicsItem::CacheQuadItem::subQuads</a></div><div class="ttdeci">QList&lt; CacheQuadMapping &gt; subQuads</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00221">ShapeGraphicsItem.h:221</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_adb2e44453f779d41661fa3067e0a2bc0"><div class="ttname"><a href="classShapeGraphicsItem.html#adb2e44453f779d41661fa3067e0a2bc0">ShapeGraphicsItem::getMapping</a></div><div class="ttdeci">Mapping::ptr getMapping() const </div><div class="ttdoc">Returns the mapping. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00063">ShapeGraphicsItem.h:63</a></div></div>
<div class="ttc" id="classEllipse_html_af56d0e5ab3a476768b3b3b9b49d239ac"><div class="ttname"><a href="classEllipse.html#af56d0e5ab3a476768b3b3b9b49d239ac">Ellipse::getVerticalRadius</a></div><div class="ttdeci">qreal getVerticalRadius() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00343">Shape.h:343</a></div></div>
<div class="ttc" id="classEllipseTextureGraphicsItem_1_1DrawingData_html"><div class="ttname"><a href="classEllipseTextureGraphicsItem_1_1DrawingData.html">EllipseTextureGraphicsItem::DrawingData</a></div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00255">ShapeGraphicsItem.h:255</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_a73dbad4408293dccec1c265b1c7d81e0"><div class="ttname"><a href="classTextureGraphicsItem.html#a73dbad4408293dccec1c265b1c7d81e0">TextureGraphicsItem::_doDrawInput</a></div><div class="ttdeci">virtual void _doDrawInput(QPainter *painter)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00199">ShapeGraphicsItem.cpp:199</a></div></div>
<div class="ttc" id="classColor_html"><div class="ttname"><a href="classColor.html">Color</a></div><div class="ttdef"><b>Definition:</b> <a href="Paint_8h_source.html#l00100">Paint.h:100</a></div></div>
<div class="ttc" id="ShapeGraphicsItem_8h_html"><div class="ttname"><a href="ShapeGraphicsItem_8h.html">ShapeGraphicsItem.h</a></div></div>
<div class="ttc" id="classMeshControlPainter_html"><div class="ttname"><a href="classMeshControlPainter.html">MeshControlPainter</a></div><div class="ttdoc">Control painter for meshes. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeControlPainter_8h_source.html#l00076">ShapeControlPainter.h:76</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ae310124e3aaeb1d4654fd84e4b99308b"><div class="ttname"><a href="classShapeGraphicsItem.html#ae310124e3aaeb1d4654fd84e4b99308b">ShapeGraphicsItem::boundingRect</a></div><div class="ttdeci">virtual QRectF boundingRect() const </div><div class="ttdoc">Returns the bounding rectangle of this item. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00081">ShapeGraphicsItem.h:81</a></div></div>
<div class="ttc" id="classPolygonControlPainter_html"><div class="ttname"><a href="classPolygonControlPainter.html">PolygonControlPainter</a></div><div class="ttdoc">Control painter for polygons. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeControlPainter_8h_source.html#l00054">ShapeControlPainter.h:54</a></div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadMapping_html_a189b498a3edeecfde42eab4e481fd110"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a189b498a3edeecfde42eab4e481fd110">MeshTextureGraphicsItem::CacheQuadMapping::input</a></div><div class="ttdeci">Quad input</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00214">ShapeGraphicsItem.h:214</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_a510d39f31dd411023fff69e82c43d277"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#a510d39f31dd411023fff69e82c43d277">MeshTextureGraphicsItem::_nVerticalQuads</a></div><div class="ttdeci">int _nVerticalQuads</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00244">ShapeGraphicsItem.h:244</a></div></div>
<div class="ttc" id="structMeshTextureGraphicsItem_1_1CacheQuadMapping_html_a2612d5311718626713c4509b5189c419"><div class="ttname"><a href="structMeshTextureGraphicsItem_1_1CacheQuadMapping.html#a2612d5311718626713c4509b5189c419">MeshTextureGraphicsItem::CacheQuadMapping::output</a></div><div class="ttdeci">Quad output</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8h_source.html#l00215">ShapeGraphicsItem.h:215</a></div></div>
<div class="ttc" id="classEllipse_html_a41bb574712c32c3de25c7854ad60ad93"><div class="ttname"><a href="classEllipse.html#a41bb574712c32c3de25c7854ad60ad93">Ellipse::getRotation</a></div><div class="ttdeci">qreal getRotation() const </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8h_source.html#l00305">Shape.h:305</a></div></div>
<div class="ttc" id="namespaceUtil_html_a2b06fd59c3dd967fbc20cc9c39fce47f"><div class="ttname"><a href="namespaceUtil.html#a2b06fd59c3dd967fbc20cc9c39fce47f">Util::setGlTexPoint</a></div><div class="ttdeci">void setGlTexPoint(const Texture &amp;texture, const QPointF &amp;inputPoint, const QPointF &amp;outputPoint)</div><div class="ttdoc">Takes a point (intputPoint) on texture and outputs it as a GL vertex on output (outputPoint). </div><div class="ttdef"><b>Definition:</b> <a href="Util_8cpp_source.html#l00036">Util.cpp:36</a></div></div>
<div class="ttc" id="classMapperGLCanvas_html_a6bcb1df29a0f7a878ab6cf688ec1b2ea"><div class="ttname"><a href="classMapperGLCanvas.html#a6bcb1df29a0f7a878ab6cf688ec1b2ea">MapperGLCanvas::shapeGrabbed</a></div><div class="ttdeci">bool shapeGrabbed() const </div><div class="ttdef"><b>Definition:</b> <a href="MapperGLCanvas_8h_source.html#l00086">MapperGLCanvas.h:86</a></div></div>
<div class="ttc" id="classMM_html_aab41a32b925a41f7adc9c62a2f351a0a"><div class="ttname"><a href="classMM.html#aab41a32b925a41f7adc9c62a2f351a0a">MM::ELLIPSE_N_TRIANGLES</a></div><div class="ttdeci">static const int ELLIPSE_N_TRIANGLES</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00082">MM.h:82</a></div></div>
<div class="ttc" id="classMM_html_a9d1b4e72ee33676165354f33525362cf"><div class="ttname"><a href="classMM.html#a9d1b4e72ee33676165354f33525362cf">MM::MESH_SUBDIVISION_MAX_DEPTH_EDITING</a></div><div class="ttdeci">static const int MESH_SUBDIVISION_MAX_DEPTH_EDITING</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00080">MM.h:80</a></div></div>
<div class="ttc" id="classColorGraphicsItem_html_a96caf1e211c139e921e00f32cdead90e"><div class="ttname"><a href="classColorGraphicsItem.html#a96caf1e211c139e921e00f32cdead90e">ColorGraphicsItem::_prePaint</a></div><div class="ttdeci">virtual void _prePaint(QPainter *painter, const QStyleOptionGraphicsItem *option)</div><div class="ttdoc">Can be overriden to perform operations before _doPaint() is called. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00112">ShapeGraphicsItem.cpp:112</a></div></div>
<div class="ttc" id="namespaceUtil_html_a2705241815455b8999c6e9d04530f740"><div class="ttname"><a href="namespaceUtil.html#a2705241815455b8999c6e9d04530f740">Util::correctGlTexCoord</a></div><div class="ttdeci">void correctGlTexCoord(GLfloat x, GLfloat y)</div><div class="ttdoc">Calls glTexCoord2f() with the corrected texture coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="Util_8cpp_source.html#l00031">Util.cpp:31</a></div></div>
<div class="ttc" id="classPolygonTextureGraphicsItem_html_ae4501707821a1d1968236e67e587e33f"><div class="ttname"><a href="classPolygonTextureGraphicsItem.html#ae4501707821a1d1968236e67e587e33f">PolygonTextureGraphicsItem::shape</a></div><div class="ttdeci">virtual QPainterPath shape() const </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00278">ShapeGraphicsItem.cpp:278</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ad848db2b75def8fdfdff526c4477df22"><div class="ttname"><a href="classShapeGraphicsItem.html#ad848db2b75def8fdfdff526c4477df22">ShapeGraphicsItem::paint</a></div><div class="ttdeci">virtual void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)</div><div class="ttdoc">Built-in function: paints the shape. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00041">ShapeGraphicsItem.cpp:41</a></div></div>
<div class="ttc" id="classTextureGraphicsItem_html_a58c276efcf0c8c0ceddaeed960612106"><div class="ttname"><a href="classTextureGraphicsItem.html#a58c276efcf0c8c0ceddaeed960612106">TextureGraphicsItem::TextureGraphicsItem</a></div><div class="ttdeci">TextureGraphicsItem(Mapping::ptr mapping, bool output=true)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00175">ShapeGraphicsItem.cpp:175</a></div></div>
<div class="ttc" id="classMainWindow_html"><div class="ttname"><a href="classMainWindow.html">MainWindow</a></div><div class="ttdoc">This is the main window of MapMap. </div><div class="ttdef"><b>Definition:</b> <a href="MainWindow_8h_source.html#l00055">MainWindow.h:55</a></div></div>
<div class="ttc" id="classShapeGraphicsItem_html_ace336beca655965fff6324b788f2c571"><div class="ttname"><a href="classShapeGraphicsItem.html#ace336beca655965fff6324b788f2c571">ShapeGraphicsItem::isMappingCurrent</a></div><div class="ttdeci">bool isMappingCurrent() const </div><div class="ttdoc">Returns whether the mapping this shape is associated with is currently selected. </div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00037">ShapeGraphicsItem.cpp:37</a></div></div>
<div class="ttc" id="classMeshTextureGraphicsItem_html_ac93a420e865659c8c034fb78110326e2"><div class="ttname"><a href="classMeshTextureGraphicsItem.html#ac93a420e865659c8c034fb78110326e2">MeshTextureGraphicsItem::_split</a></div><div class="ttdeci">QList&lt; Quad &gt; _split(const Quad &amp;quad)</div><div class="ttdef"><b>Definition:</b> <a href="ShapeGraphicsItem_8cpp_source.html#l00457">ShapeGraphicsItem.cpp:457</a></div></div>
<div class="ttc" id="classMM_html_a5270defadf36dc4b153bb2455565399a"><div class="ttname"><a href="classMM.html#a5270defadf36dc4b153bb2455565399a">MM::MESH_SUBDIVISION_MIN_AREA</a></div><div class="ttdeci">static const int MESH_SUBDIVISION_MIN_AREA</div><div class="ttdef"><b>Definition:</b> <a href="MM_8h_source.html#l00079">MM.h:79</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 31 2015 20:28:04 for MapMap by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
